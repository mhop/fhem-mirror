Hallo Rudi,

anbei meine aktuelle Version von HMLAN ud DevIo für den HM-USB-CFG.
Ich hab es bislang aber nicht geschaft zu senden. Als Monitor ist die
Version aber brauchbar. Bitte schau drüber ob die Qualität for das
contrib Verzeichniss reicht. Wenn's passt bitte einchecken. Vielleicht
hat ja jemand eine Idee was fehlt...

Ich hab alle Änderungen deutlich mit

for HM-USB-CFG by peterp bzw. HIDDEV by peterp

gekennzeichnet und mit

if($hash->{HIDDev})

abgetrennt. Die Originalfuntionalität sollte also durch meine
Änderungen nicht beeinträchtigt sein.

In der config datei definiert man

define HMUSB HMLAN /dev/usb/hiddev0
attr HMUSB addvaltrigger RSSI
attr HMUSB hmId 123456
attr HMUSB hmProtocolEvents 1
attr HMUSB room Innen

in der Logdatei sieht das dann so aus:

2012.04.01 20:02:22.828 2: DevIo opened HID /dev/usb/hiddev0
2012.04.01 20:02:22.839 2: DevIo_SimpleWrite: 4178987d0d0a
2012.04.01 20:02:22.850 2: DevIo_SimpleWrite: 430d0a
2012.04.01 20:02:22.862 2: DevIo_SimpleWrite: 5901010d0a
2012.04.01 20:02:22.873 2: DevIo_SimpleWrite: 5902000d0a
2012.04.01 20:02:22.885 2: DevIo_SimpleWrite: 5903000d0a
2012.04.01 20:02:22.896 2: DevIo_SimpleWrite: 5903000d0a
2012.04.01 20:02:22.908 2: DevIo_SimpleWrite: 54170b54ae0400000000000d0a
2012.04.01 20:02:23.607 0: Server started (version =VERS= from =DATE=
($Id$), pid 10178)
2012.04.01 20:02:47.946 2: DevIo_SimpleWrite: 4b0d0a
2012.04.01 20:03:10.639 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BCAST,BIDI,RPTEN) SRC:14F617 DST:123456 018100
2012.04.01 20:03:10.755 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.767 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.779 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.790 2: DevIo_SimpleWrite: 2d14f6170d0a
2012.04.01 20:03:10.802 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.813 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.825 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.837 2: DevIo_SimpleWrite: 2b14f61700000d0a
2012.04.01 20:03:10.848 2: DevIo_SimpleWrite:
536f1333ac0000000000016f1333ac01800212345614f617010100000d0a
2012.04.01 20:03:10.889 2: SYS HMUSB SND L:0D N:01 CMD:8002
(TYPE=2,RPTEN) SRC:123456 DST:14F617 01010000 (ACK_STATUS CHANNEL:01
STATUS:00)
2012.04.01 20:03:10.908 2: HM-TFK LSE_TFKTEST closed
2012.04.01 20:03:10.911 2: HM-TFK LSE_TFKTEST contact: closed
2012.04.01 20:03:10.930 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BIDI,RPTEN) SRC:14F617 DST:123456 018100
2012.04.01 20:03:11.046 2: DevIo_SimpleWrite:
536f1334710000000000016f13347102800212345614f617010100000d0a
2012.04.01 20:03:11.086 2: SYS HMUSB SND L:0D N:02 CMD:8002
(TYPE=2,RPTEN) SRC:123456 DST:14F617 01010000 (ACK_STATUS CHANNEL:01
STATUS:00)
2012.04.01 20:03:11.407 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BIDI,RPTEN) SRC:14F617 DST:123456 018100
2012.04.01 20:03:11.523 2: DevIo_SimpleWrite:
536f13364e0000000000016f13364e03800212345614f617010100000d0a
2012.04.01 20:03:11.563 2: SYS HMUSB SND L:0D N:03 CMD:8002
(TYPE=2,RPTEN) SRC:123456 DST:14F617 01010000 (ACK_STATUS CHANNEL:01
STATUS:00)
2012.04.01 20:03:12.431 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BIDI,RPTEN) SRC:14F617 DST:123456 018100
2012.04.01 20:03:12.547 2: DevIo_SimpleWrite:
536f133a4e0000000000016f133a4e04800212345614f617010100000d0a
2012.04.01 20:03:12.587 2: SYS HMUSB SND L:0D N:04 CMD:8002
(TYPE=2,RPTEN) SRC:123456 DST:14F617 01010000 (ACK_STATUS CHANNEL:01
STATUS:00)
2012.04.01 20:03:14.447 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BIDI,RPTEN) SRC:14F617 DST:123456 018100
2012.04.01 20:03:14.563 2: DevIo_SimpleWrite:
536f13422e0000000000016f13422e05800212345614f617010100000d0a
2012.04.01 20:03:14.603 2: SYS HMUSB SND L:0D N:05 CMD:8002
(TYPE=2,RPTEN) SRC:123456 DST:14F617 01010000 (ACK_STATUS CHANNEL:01
STATUS:00)
2012.04.01 20:03:18.511 2: SYS HMUSB RCV L:0C N:8A CMD:A041
(TYPE=65,BIDI,RPTEN) SRC:14F617 DST:123456 018100

Grüße aus Wien
Peter
